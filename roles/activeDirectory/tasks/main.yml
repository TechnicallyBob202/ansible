---
# Main task file for activeDirectory role
# Routes to specific task files based on operation

- name: Include domain status check tasks
  include_tasks: check_domain_status.yml
  when: ad_operation == 'check_domain_status'

- name: Include AD features installation tasks
  include_tasks: install_ad_features.yml
  when: ad_operation == 'install_ad_features'

- name: Include forest root promotion tasks
  include_tasks: promote_forest_root.yml
  when: ad_operation == 'promote_forest_root'

- name: Include replica DC promotion tasks
  include_tasks: promote_replica_dc.yml
  when: ad_operation == 'promote_replica_dc'

- name: Include child domain promotion tasks
  include_tasks: promote_child_domain.yml
  when: ad_operation == 'promote_child_domain'

- name: Include DC readiness check tasks
  include_tasks: wait_for_dc_ready.yml
  when: ad_operation == 'wait_for_dc_ready'

- name: Include replication verification tasks
  include_tasks: verify_replication.yml
  when: ad_operation == 'verify_replication'

- name: Include service account creation tasks
  include_tasks: create_service_accounts.yml
  when: ad_operation == 'create_service_accounts'

- name: Include FSMO role check tasks
  include_tasks: check_fsmo_roles.yml
  when: ad_operation == 'check_fsmo_roles'