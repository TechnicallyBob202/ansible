---
# Full network configuration workflow: IP + DNS + Hostname + Reboot

- name: Set static IP address
  include_tasks: set_static_ip.yml

- name: Configure DNS servers
  include_tasks: set_dns.yml

- name: Set hostname
  include_tasks: set_hostname.yml

- name: Reboot if hostname changed
  include_tasks: reboot.yml
  when: reboot_required | default(false)

- name: Display configuration summary
  debug:
    msg:
      - "Network configuration complete for {{ inventory_hostname }}"
      - "  IP: {{ ansible_host }}/{{ windows_ip_prefix }}"
      - "  Gateway: {{ windows_gateway }}"
      - "  DNS: {{ windows_dns_servers | join(', ') }}"
      - "  Hostname: {{ inventory_hostname }}"
      - "  Reboot: {{ 'Yes' if reboot_required | default(false) else 'No' }}"