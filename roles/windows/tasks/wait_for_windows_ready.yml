---
# Wait for Windows to be fully ready before attempting operations
# Uses only WinRM/PowerShell - no Linux-based modules

- name: Wait for WinRM to be available
  ansible.windows.win_ping:
    data: "boot_test"
  register: winrm_check
  retries: 30
  delay: 10
  until: winrm_check is succeeded
  changed_when: false

- name: Display Windows readiness status
  debug:
    msg: "{{ inventory_hostname }} is ready (WinRM responsive)"
  changed_when: false