---
# roles/proxmox/tasks/configure_tag_styles.yml
# Configure Proxmox tag colors - run once per unique proxmox_host

- name: Configure tag styles via API
  uri:
    url: "https://{{ proxmox_host }}:8006/api2/json/cluster/options"
    method: PUT
    user: "{{ proxmox_user }}"
    password: "{{ proxmox_password }}"
    validate_certs: "{{ proxmox_validate_certs }}"
    body_format: form-urlencoded
    body:
      tagstyle: "adfr:2ecc71:ffffff\ndsp:3498db:ffffff"
  register: tag_config_result
  changed_when: tag_config_result.status == 200
  delegate_to: localhost

- name: Display tag configuration
  debug:
    msg:
      - "âœ“ {{ proxmox_host }} - Proxmox tag styles configured"
      - "  adfr tag: Green (#2ecc71)"
      - "  dsp tag: Blue (#3498db)"
  delegate_to: localhost