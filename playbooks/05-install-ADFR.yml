# playbooks/05-install-ADFR.yml
---
- name: Stage ADFR Installation Files
  hosts: ATLAS:RIDGE:CREST
  gather_facts: no
  serial: 0

  vars:
    adfr_operation: stage

  tasks:
    - name: Stage ADFR files
      include_role:
        name: semperis_adfr

    - name: Verify installation
      ansible.windows.win_stat:
        path: "{{ adfr_local_path }}/ADFR-{{ adfr_version }}.exe"
      register: adfr_exe

    - name: Display result
      debug:
        msg: "{{ inventory_hostname }} - {{ 'SUCCESS' if adfr_exe.stat.exists else 'FAILED' }}"

- name: Summary
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Display completion
      debug:
        msg: "ADFR staging complete on {{ groups['all'] | length }} hosts"