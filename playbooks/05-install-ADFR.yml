# playbooks/05-install-ADFR.yml
---
# =============================================================================
# PHASE 1: Stage ADFR Installation Files on All ADFR Hosts
# =============================================================================
- name: Stage ADFR Installation Files
  hosts: ATLAS:RIDGE:CREST
  gather_facts: no
  serial: 0

  vars:
    adfr_operation: stage

  tasks:
    - name: Display staging plan
      debug:
        msg: "Staging ADFR {{ adfr_version }} files to {{ inventory_hostname }}"

    - name: Stage ADFR files
      include_role:
        name: semperis_adfr

    - name: Display staging complete
      debug:
        msg: "{{ inventory_hostname }} - ADFR files staged to {{ adfr_local_path }}"

# =============================================================================
# PHASE 2: Summary
# =============================================================================
- name: Staging Summary
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Display completion
      debug:
        msg:
          - "========================================="
          - "ADFR Files Staged"
          - "========================================="
          - ""
          - "Files Staged:"
          - "  ✓ ATLAS (192.168.35.10)"
          - "  ✓ RIDGE (192.168.35.13)"
          - "  ✓ CREST (192.168.35.14)"
          - ""
          - "Next Steps:"
          - "  1. RDP to ATLAS: mstsc /v:192.168.35.10"
          - "  2. Run: C:\\Semperis\\install-adfr.ps1"
          - "  3. Wait for installation to complete"
          - "  4. Access ADFR Console: https://192.168.35.10"