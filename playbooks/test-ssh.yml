---
- name: Test SSH using Semaphore-attached key
  hosts: "192.168.35.248"     # hard-coded current IP you gave
  gather_facts: false
  vars:
    ansible_connection: ssh
    ansible_user: blyons
    ansible_python_interpreter: /usr/bin/python3
    ansible_ssh_private_key_file: "~/.ssh/ansible_key"

    # Force key-only auth so Ansible does NOT try password/sshpass
    ansible_ssh_common_args: "-o PreferredAuthentications=publickey -o PasswordAuthentication=no -o StrictHostKeyChecking=no"

    # If your Ansible is 2.19+, hard-disable password handling in the ssh plugin
    ansible_ssh_password_mechanism: disable

  tasks:
    - name: Ping over SSH
      ansible.builtin.ping:

    - name: Who am I
      ansible.builtin.command: whoami
      register: who
      changed_when: false

    - name: Show result
      ansible.builtin.debug:
        msg: "Connected to {{ inventory_hostname }} as {{ who.stdout }}"