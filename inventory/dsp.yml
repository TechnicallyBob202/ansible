---
all:
  children:
    # ============================================
    # D3.lab Forest - Single Domain
    # ============================================
    d3_forest:
      children:
        d3_dcs:
          hosts:
            D3-DC01:
              ansible_host: 172.16.50.12
              dc_role: pdc
              vmid: 5012
              proxmox_host: 192.168.33.21
              proxmox_node: semperis-nuc-1
              template_id: 9001
              vm_cores: 2
              vm_memory: 4096
              vm_disk: 80G
              proxmox_vm_tags: "dsp"
            D3-DC02:
              ansible_host: 172.16.50.22
              dc_role: pdc
              vmid: 5022
              proxmox_host: 192.168.33.21
              proxmox_node: semperis-nuc-1
              template_id: 9001
              vm_cores: 2
              vm_memory: 4096
              vm_disk: 80G
              proxmox_vm_tags: "dsp"

          vars:
            domain_name: d3.lab
            netbios_name: D3

    # ============================================
    # DSP Infrastructure
    # ============================================
    dsp_infrastructure:
      hosts:
        DSP:
          ansible_host: 172.16.50.10
          vmid: 5010
          proxmox_host: 192.168.33.21
          proxmox_node: semperis-nuc-1
          template_id: 9011
          vm_cores: 4
          vm_memory: 8192
          vm_disk: 100G
          proxmox_vm_tags: "dsp"
          role: "DSP Management Server"

        SQL:
          ansible_host: 172.16.50.13
          vmid: 5013
          proxmox_host: 192.168.33.21
          proxmox_node: semperis-nuc-1
          template_id: 9011
          vm_cores: 4
          vm_memory: 16384
          vm_disk: 200G
          proxmox_vm_tags: "dsp"
          role: "SQL Server"

        UTILITY:
          ansible_host: 172.16.50.14
          vmid: 5014
          proxmox_host: 192.168.33.21
          proxmox_node: semperis-nuc-1
          template_id: 9011
          vm_cores: 2
          vm_memory: 4096
          vm_disk: 80G
          proxmox_vm_tags: "dsp"
          role: "Utility Server"

    # ============================================
    # DSP Linux Systems
    # ============================================
    dsp_linux:
      vars:
        ansible_python_interpreter: /usr/bin/python3
        ansible_connection: ssh
        ansible_user: hsadministrator
        ansible_ssh_private_key_file: /root/.ssh/semperis_admin
        ansible_port: 22
        ansible_ssh_common_args: '-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
      hosts:
        IAS:
          ansible_host: 172.16.50.11
          secondary_ip: 172.16.50.15  # Second NIC
          secondary_nic: true
          vmid: 5011
          proxmox_host: 192.168.33.21
          proxmox_node: semperis-nuc-1
          template_id: 9023
          vm_cores: 8
          vm_memory: 16384
          vm_disk: 100G
          proxmox_vm_tags: "dsp"
          role: "Identity Analytics Scanner"

    # ============================================
    # Logical Groupings
    # ============================================
    domain_controllers:
      children:
        d3_forest:

        # Stage 03: Forest Root DCs
        forest_root_dcs:
          children:
            d3_dcs:

        # Stage 04: Child Domain DCs (empty for DSP)
        child_domain_dcs:
          hosts:

        # Role-based groups for promotion phases
        root_pdcs:
          hosts:
            D3-DC01:

        root_replicas:
          hosts:

        child_pdcs:
          hosts:

        child_replicas:
          hosts:

    infrastructure:
      children:
        dsp_infrastructure:
        dsp_linux:

    windows:
      children:
        d3_forest:
        dsp_infrastructure:

    linux:
      children:
        dsp_linux: