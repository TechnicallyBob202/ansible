---
# Input variables required:
#   - domain_name: e.g., "arbor.lab"
#   - domain_sid: SID string
#   - output_file: filename (e.g., "arbor-domain-sid.txt")

- name: Save {{ domain_name }} domain SID to file
  copy:
    content: |
      # {{ domain_name }} Domain SID
      # Generated: {{ ansible_date_time.iso8601 }}

      {{ domain_name }}={{ domain_sid }}
    dest: "{{ playbook_dir }}/../files/{{ output_file }}"
  delegate_to: localhost
  when: domain_sid is defined and domain_sid != ''

- name: Display saved SID
  debug:
    msg: "{{ domain_name }} SID saved: {{ domain_sid }}"
  when: domain_sid is defined and domain_sid != ''