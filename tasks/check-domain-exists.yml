---
# Input variables required:
#   - domain_name: DNS name of domain to check (e.g., "arbor.lab")
# Output facts:
#   - domain_exists: boolean
#   - domain_sid: string (if exists)

- name: Check if {{ domain_name }} domain exists
  ansible.windows.win_powershell:
    script: |
      try {
        $domain = Get-